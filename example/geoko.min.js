"use strict";var GeoPoint=function(){function t(t,i,s){this._x=t||0,this._y=i||0,this._z=s||0}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t},enumerable:!1,configurable:!0}),t}(),ConvertLocation=function(){function t(){this.GEO=0,this.KATEC=1,this.TM=2,this.GRS80=3,this.UTMK=4,this.mInd=[],this.m_Es=[],this.m_Esp=[],this.srcM=[],this.dstM=[],this.EPSLN=1e-10,this.mArMajor=[],this.mArMinor=[],this.mArScaleFactor=[],this.mArLonCenter=[],this.mArLatCenter=[],this.mArFalseNorthing=[],this.mArFalseEasting=[],this.datumParams=[],this.HALF_PI=.5*Math.PI,this.COS_67P5=.3826834323650898,this.AD_C=1.0026,this.mArScaleFactor[this.GEO]=1,this.mArLonCenter[this.GEO]=0,this.mArLatCenter[this.GEO]=0,this.mArFalseNorthing[this.GEO]=0,this.mArFalseEasting[this.GEO]=0,this.mArMajor[this.GEO]=6378137,this.mArMinor[this.GEO]=6356752.3142,this.mArScaleFactor[this.KATEC]=.9999,this.mArLonCenter[this.KATEC]=2.23402144255274,this.mArLatCenter[this.KATEC]=.663225115757845,this.mArFalseNorthing[this.KATEC]=6e5,this.mArFalseEasting[this.KATEC]=4e5,this.mArMajor[this.KATEC]=6377397.155,this.mArMinor[this.KATEC]=6356078.963342249,this.mArScaleFactor[this.TM]=1,this.mArLonCenter[this.TM]=2.21661859489671,this.mArLatCenter[this.TM]=.663225115757845,this.mArFalseNorthing[this.TM]=5e5,this.mArFalseEasting[this.TM]=2e5,this.mArMajor[this.TM]=6377397.155,this.mArMinor[this.TM]=6356078.963342249,this.mArScaleFactor[this.GRS80]=1,this.mArLonCenter[this.GRS80]=2.2165681500328,this.mArLatCenter[this.GRS80]=.663225115757845,this.mArFalseNorthing[this.GRS80]=5e5,this.mArFalseEasting[this.GRS80]=2e5,this.mArMajor[this.GRS80]=6378137,this.mArMinor[this.GRS80]=6356752.3142,this.mArScaleFactor[this.UTMK]=.9996,this.mArLonCenter[this.UTMK]=2.22529479629277,this.mArLatCenter[this.UTMK]=.663225115757845,this.mArFalseNorthing[this.UTMK]=2e6,this.mArFalseEasting[this.UTMK]=1e6,this.mArMajor[this.UTMK]=6378137,this.mArMinor[this.UTMK]=6356752.314140356,this.datumParams[0]=-146.43,this.datumParams[1]=507.89,this.datumParams[2]=681.46,this.initialEsEspInd(this.GEO),this.initialEsEspInd(this.KATEC),this.initialEsEspInd(this.TM),this.initialEsEspInd(this.UTMK),this.initialEsEspInd(this.GRS80),this.initialSrcDst(this.GEO),this.initialSrcDst(this.KATEC),this.initialSrcDst(this.TM),this.initialSrcDst(this.UTMK),this.initialSrcDst(this.GRS80)}return t.prototype.initialEsEspInd=function(t){var i=this.mArMinor[t]/this.mArMajor[t];this.m_Es[t]=1-i*i,this.m_Esp[t]=this.m_Es[t]/(1-this.m_Es[t]),this.m_Es[t]<1e-5?this.mInd[t]=1:this.mInd[t]=0},t.prototype.initialSrcDst=function(t){var i=this.m_Es[t],s=this.mArMajor[t]*this.mlfn(this.e0fn(i),this.e1fn(i),this.e2fn(i),this.e3fn(i),this.mArLatCenter[t]);this.srcM[t]=s,this.dstM[t]=s},t.prototype.D2R=function(t){return t*Math.PI/180},t.prototype.R2D=function(t){return 180*t/Math.PI},t.prototype.mlfn=function(t,i,s,r,h){return t*h-i*Math.sin(2*h)+s*Math.sin(4*h)-r*Math.sin(6*h)},t.prototype.e0fn=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},t.prototype.e1fn=function(t){return.375*t*(1+.25*t*(1+.46875*t))},t.prototype.e2fn=function(t){return.05859375*t*t*(1+.75*t)},t.prototype.e3fn=function(t){return t*t*t*(35/3072)},t.prototype.asinz=function(t){return Math.abs(t)>1&&(t=t>0?1:-1),Math.asin(t)},t.prototype.convert=function(t,i,s){var r=new GeoPoint,h=new GeoPoint;return t===this.GEO?(r.x=this.D2R(s.x),r.y=this.D2R(s.y)):this.tm2geo(t,s,r),i===this.GEO?(h.x=this.R2D(r.x),h.y=this.R2D(r.y)):this.geo2tm(i,r,h),h},t.prototype.geo2tm=function(t,i,s){this.transform(this.GEO,t,i);var r=i.x-this.mArLonCenter[t],h=Math.sin(i.y),e=Math.cos(i.y);if(0!==this.mInd[t]){var n=e*Math.sin(r);Math.abs(Math.abs(n)-1)<this.EPSLN&&console.error("무한대 에러")}else{n=0;.5*this.mArMajor[t]*this.mArScaleFactor[t]*Math.log((1+n)/(1-n));var o=Math.acos(e*Math.cos(r)/Math.sqrt(1-n*n));i.y<0&&(o*=-1,this.mArMajor[t]*this.mArScaleFactor[t]*(o-this.mArLatCenter[t]))}var a=e*r,c=a*a,m=this.m_Es[t]*e*e,u=Math.tan(i.y),p=u*u,M=1-this.m_Es[t]*h*h,_=this.mArMajor[t]/Math.sqrt(M),A=this.mArMajor[t]*this.mlfn(this.e0fn(this.m_Es[t]),this.e1fn(this.m_Es[t]),this.e2fn(this.m_Es[t]),this.e3fn(this.m_Es[t]),i.y);s.x=this.mArScaleFactor[t]*_*a*(1+c/6*(1-p+m+c/20*(5-18*p+p*p+72*m-58*this.m_Esp[t])))+this.mArFalseEasting[t],s.y=this.mArScaleFactor[t]*(A-this.dstM[t]+_*u*(c*(.5+c/24*(5-p+9*m+4*m*m+c/30*(61-58*p+p*p+600*m-330*this.m_Esp[t])))))+this.mArFalseNorthing[t]},t.prototype.tm2geo=function(t,i,s){var r=new GeoPoint(i.x,i.y);if(0!==this.mInd[t]){var h=Math.exp(i.x/(this.mArMajor[t]*this.mArScaleFactor[t])),e=.5*(h-1/h),n=this.mArLatCenter[t]+r.y/(this.mArMajor[t]*this.mArScaleFactor[t]),o=Math.cos(n),a=Math.sqrt((1-o*o)/(1+e*e));s.y=this.asinz(a),n<0&&(s.y*=-1),s.x=0===e&&0===o?this.mArLonCenter[t]:Math.atan(e/o)+this.mArLonCenter[t]}r.x-=this.mArFalseEasting[t],r.y-=this.mArFalseNorthing[t];for(var c=(this.srcM[t]+r.y/this.mArScaleFactor[t])/this.mArMajor[t],m=c,u=0;;){var p=(c+this.e1fn(this.m_Es[t])*Math.sin(2*m)-this.e2fn(this.m_Es[t])*Math.sin(4*m)+this.e3fn(this.m_Es[t])*Math.sin(6*m))/this.e0fn(this.m_Es[t])-m;if(m+=p,Math.abs(p)<=this.EPSLN)break;if(u>=6)break;u++}if(Math.abs(m)<Math.PI/2){var M=Math.sin(m),_=Math.cos(m),A=Math.tan(m),f=this.m_Esp[t]*_*_,y=f*f,E=A*A,g=E*E,l=1-this.m_Es[t]*M*M,v=this.mArMajor[t]/Math.sqrt(l),G=v*(1-this.m_Es[t])/l,P=r.x/(v*this.mArScaleFactor[t]),T=P*P;s.y=m-v*A*T/G*(.5-T/24*(5+3*E+10*f-4*y-9*this.m_Esp[t]-T/30*(61+90*E+298*f+45*g-252*this.m_Esp[t]-3*y))),s.x=this.mArLonCenter[t]+P*(1-T/6*(1+2*E+f-T/20*(5-2*f+28*E-3*y+8*this.m_Esp[t]+24*g)))/_}else s.y=.5*Math.PI*Math.sin(r.y),s.x=this.mArLonCenter[t];this.transform(t,this.GEO,s)},t.prototype.getDistancebyGeo=function(t,i){var s=this.D2R(t.y),r=this.D2R(t.x),h=this.D2R(i.y),e=this.D2R(i.x)-r,n=h-s,o=Math.pow(Math.sin(n/2),2)+Math.cos(s)*Math.cos(h)*Math.pow(Math.sin(e/2),2);return 12753*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))},t.prototype.getDistancebyKatec=function(t,i){return t=this.convert(this.KATEC,this.GEO,t),i=this.convert(this.KATEC,this.GEO,i),this.getDistancebyGeo(t,i)},t.prototype.getDistancebyTm=function(t,i){return t=this.convert(this.TM,this.GEO,t),i=this.convert(this.TM,this.GEO,i),this.getDistancebyGeo(t,i)},t.prototype.getDistancebyUTMK=function(t,i){return t=this.convert(this.UTMK,this.GEO,t),i=this.convert(this.UTMK,this.GEO,i),this.getDistancebyGeo(t,i)},t.prototype.getDistancebyGrs80=function(t,i){return t=this.convert(this.GRS80,this.GEO,t),i=this.convert(this.GRS80,this.GEO,i),this.getDistancebyGeo(t,i)},t.prototype.getTimebySec=function(t){return Math.round(3600*t/4)},t.prototype.getTimebyMin=function(t){return Math.ceil(this.getTimebySec(t)/60)},t.prototype.transform=function(t,i,s){t!==i&&(0!==t&&t!==this.GRS80&&t!==this.UTMK||0!==i&&i!==this.GRS80&&i!==this.UTMK)&&(this.geodetic_to_geocentric(t,s),0!==t&&t!==this.GRS80&&t!==this.UTMK&&this.geocentric_to_wgs84(s),0!==i&&i!==this.GRS80&&i!==this.UTMK&&this.geocentric_from_wgs84(s),this.geocentric_to_geodetic(i,s))},t.prototype.geodetic_to_geocentric=function(t,i){var s,r,h,e,n,o,a,c=i.x,m=i.y,u=i.z;if(m<-this.HALF_PI&&m>-1.001*this.HALF_PI)m=-this.HALF_PI;else if(m>this.HALF_PI&&m<1.001*this.HALF_PI)m=this.HALF_PI;else if(m<-this.HALF_PI||m>this.HALF_PI)return!0;return c>Math.PI&&(c-=2*Math.PI),n=Math.sin(m),a=Math.cos(m),o=n*n,s=((e=this.mArMajor[t]/Math.sqrt(1-this.m_Es[t]*o))+u)*a*Math.cos(c),r=(e+u)*a*Math.sin(c),h=(e*(1-this.m_Es[t])+u)*n,i.x=s,i.y=r,i.z=h,!1},t.prototype.geocentric_to_geodetic=function(t,i){var s,r,h,e,n,o,a,c,m,u,p,M,_,A,f,y,E=i.x,g=i.y,l=i.z,v=0;if(y=!1,0!==E)s=Math.atan2(g,E);else if(g>0)s=this.HALF_PI;else if(g<0)s=-this.HALF_PI;else if(y=!0,s=0,l>0)v=this.HALF_PI;else{if(!(l<0))return v=this.HALF_PI,void(r=-this.mArMinor[t]);v=-this.HALF_PI}e=E*E+g*g,h=Math.sqrt(e),n=l*this.AD_C,p=h/(a=Math.sqrt(n*n+e)),u=(m=n/a)*m*m,o=l+this.mArMajor[t]*this.m_Esp[t]*u,f=h-this.mArMajor[t]*this.m_Es[t]*p*p*p,M=o/(c=Math.sqrt(o*o+f*f)),_=f/c,A=this.mArMajor[t]/Math.sqrt(1-this.m_Es[t]*M*M),r=_>=this.COS_67P5?h/_-A:_<=-this.COS_67P5?h/-_-A:l/M+A*(this.m_Es[t]-1),y||(v=Math.atan(M/_)),i.x=s,i.y=v,i.z=r},t.prototype.geocentric_to_wgs84=function(t){t.x+=this.datumParams[0],t.y+=this.datumParams[1],t.z+=this.datumParams[2]},t.prototype.geocentric_from_wgs84=function(t){t.x-=this.datumParams[0],t.y-=this.datumParams[1],t.z-=this.datumParams[2]},t}(),GeoKo=function(){function t(){this.point=new GeoPoint(0,0),this.converter=new ConvertLocation}return t.prototype.setX=function(t){return this.point.x=t,this},t.prototype.setY=function(t){return this.point.y=t,this},t.prototype.utmk_to_geo=function(){return this.convert(4,0)},t.prototype.utmk_to_tm=function(){return this.convert(4,2)},t.prototype.utmk_to_katec=function(){return this.convert(4,1)},t.prototype.utmk_to_grs80=function(){return this.convert(4,3)},t.prototype.geo_to_tm=function(){return this.convert(0,2)},t.prototype.geo_to_katec=function(){return this.convert(0,1)},t.prototype.geo_to_grs80=function(){return this.convert(0,3)},t.prototype.geo_to_utmk=function(){return this.convert(0,4)},t.prototype.grs80_to_geo=function(){return this.convert(3,0)},t.prototype.grs80_to_tm=function(){return this.convert(3,2)},t.prototype.grs80_to_katec=function(){return this.convert(3,1)},t.prototype.grs80_to_utmk=function(){return this.convert(3,4)},t.prototype.tm_to_geo=function(){return this.convert(2,0)},t.prototype.tm_to_katec=function(){return this.convert(2,1)},t.prototype.tm_to_grs80=function(){return this.convert(2,3)},t.prototype.tm_to_utmk=function(){return this.convert(2,4)},t.prototype.katec_to_geo=function(){return this.convert(1,0)},t.prototype.katec_to_tm=function(){return this.convert(1,2)},t.prototype.katec_to_grs80=function(){return this.convert(1,3)},t.prototype.katec_to_utmk=function(){return this.convert(1,4)},t.prototype.convert=function(t,i){return this.converter.convert(t,i,this.point)},t}();